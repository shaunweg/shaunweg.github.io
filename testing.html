

<style>
body {
  background-color: #212e2d;
  color: #8f9ea0;
  text-align: center;
}

a:link {
  color: #7bf2ff;
}

a:visited {
  color: #6cd4df;
}

a:hover {
  color: #9FFBF7;
}

a:active {
  color: #FFFFFF;
}

.container {
  display: flex;
  flex-direction: column;
  align-items: center;
}



.header {
  display: flex;
  align-items: center;
}

.timer, .errors,
.accuracy, .cpm, .wpm {
  background-color: #161F20;
  color: #95B2B3;
  height: 60px;
  width: 130px;
  margin: 8px;
  padding: 12px;
  border-radius: 20%;
}

.cpm, .wpm  {
  display: none;
}

.header_text {
  text-transform: uppercase;
  font-size: 0.6rem;
  font-weight: 600;
}

.curr_time, .curr_errors,
.curr_accuracy, .curr_cpm,
.curr_wpm {
  font-size: 2.75rem;
}

#quote {
  background-color: #1E2222;
  color: #B6CcCf;
  font-size: 1.5rem;
  margin: 10px 10px 0px 10px;
  padding: 20px 25px 10px 25px;
}
#quote2 {
  background-color: #1E2222;
  color: #8Fa6a8;
  font-size: 1.3rem;
  margin: 0px 10px 0px 10px;
  padding: 10px 25px 5px 25px;
}
#quote3 {
  background-color: #1E2222;
  color: #8Fa6a8;
  font-size: 1.3rem;
  margin: 0px 10px 20px 10px;
  padding: 10px 25px 20px 25px;
}

.input_area {
  background-color: #C7DBDD;
  height: 80px;
  width: 65%;
  font-size: 1.4rem;
  font-weight: 600;
  margin: 15px;
  padding: 20px;
  border: 0px;
  box-shadow: #191A30 5px 8px 5px;
}

.incorrect_char {
  color: #FA00DF;
  text-decoration: underline;
}

.correct_char {
  color: #577070;
}

.restart_btn {
  display: none;
  background-color: #26464B;
  color: #B1C385;
  font-size: 1.5rem;
  padding: 10px;
  border: 0px;
  border-radius: 10px;
  box-shadow: #192130 5px 8px 5px;
}

#heading {
  margin-bottom: 20px;
  font-size: 3rem;
  color: #c5cEc3;
 
}
#heading2 {
  margin-bottom: 0px;
  font-size: 2rem;
  color: #b4b4b4;
 
}
</style>
<br>
<div class="container">
<br>
<div class="container">
<div id="heading2">‚å®Ô∏èÔ∏èüìà Typing Practice üìà‚å®Ô∏èÔ∏è</div>
<div id="heading">place holder</div>
<p></p><br>
    <img src="https://codehs.com/uploads/ab1bbaca29442f3ca57bc05b41164ed2" width="0"><br>
    <div class="header">
      <div class="wpm">
        <div class="header_text">WPM</div>
        <div class="curr_wpm">100</div>
      </div>
      <div class="cpm">
        <div class="header_text">CPM</div>
        <div class="curr_cpm">100</div>
      </div></div>
      <div class="header">
      <div class="errors">
        <div class="header_text">Errors</div>
        <div class="curr_errors">0</div>
      </div>
      <div class="timer">
        <div class="header_text">Time</div>
        <div class="curr_time">180s</div>
      </div><br>
      <div class="accuracy">
        <div class="header_text">% Accuracy</div>
        <div class="curr_accuracy">100</div>
      </div>
    </div>
	  <p></p>    
	  <div class="container2">
	  <div class="details" id="details"></div>
    <div id="quote">In the Coding Practices,</div>
    <div id="quote2">press spacebar where ‚ê£ is shown.</div>
    <div id="quote3">Click inside the light blue area below to begin.</div>
    <textarea class="input_area" placeholder="click here to start typing..." oninput="processCurrentText()"
      onfocus="startGame()"></textarea>
	  <p></p>  <div id="log">placeholder </div><br><br>
    <button class="restart_btn" onclick="resetValues()">Reset Activity</button>
    </div>
  </div>

<script>

// define the time limit
let TIME_LIMIT = 180;
let activityName = "Benchmark";
var going = false;

// start functions
heading.innerHTML = activityName;

function getDateTime() {
    var months2 = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
    var date = new Date();

    var hour = date.getHours();
    hour = (hour < 10 ? "0" : "") + hour;

    var min  = date.getMinutes();
    min = (min < 10 ? "0" : "") + min;

    var sec2  = date.getSeconds();
    sec2 = (sec2 < 10 ? "0" : "") + sec2;

    var year = date.getFullYear();

    var month = date.getMonth() + 1;
    month = (month < 10 ? "0" : "") + month;
    month2 = months2[parseInt(month)-1]

    var day  = date.getDate();
    day = (day < 10 ? "0" : "") + day;

    return hour + ":" + min + " on " + month2 + " " + day + ", "+ year;

}

  function checkSum() {
    var date = new Date();
    var hour = date.getHours();
    var min  = date.getMinutes();
    var sec2  = date.getSeconds();
    var year = date.getFullYear();
    var month = date.getMonth() + 1;
    var day  = date.getDate();

    return String(hour+1) + String(min+1) + String(month+1) + String(day+1) + String(hour+min+month+day);

}
  
document.getElementById("log").innerHTML = "<font size='+1'>Course: Fund. of CS <br> Loaded at " + getDateTime() ;

// define quotes to be used
let quotes_array = [
  "Computer Science, a.k.a. CompSci, a.k.a. CS is the ",
  "study of computational systems to achieve specific goals. ",
  "In addition to areas like app development and software ",
  "design, CS also involves data analysis, game development, ",
  "artificial intelligence, cybersecurity, and even art. Someone ",
  "who specializes in Computer Science is a Computer Scientist. ", 
  "Computer Scientists may pursue opportunities in finance, ",
  "security, health care, government, education, and agriculture. ",
  "Robotics and AI can lead to jobs in automotive and medical ",
  "fields. Even our military includes computer scientists. ",
  "In CTE, Computer Science is part of the IT cluster, ",
  "specifically the Programming & Software Development ",
  "pathway, and relates to the STEM endorsement. ",
  "In Computer Science 1, you can earn a Python certification. ",
  "After you've completed CS1, you can start the CyberSecurity",
  "Pathway, beginning with Computer Maintenance at Guthrie. ",
  "You can also take CS as part of the IB DP or CP. ",
  "The University of Minnesota says computer scientists ",
  "are the architects of the information society. ",
  "When you say Computer Science, ",
  "some people only think of programming. ", 
  "Rice University says computer science is far broader, ",
  "involving more advanced technical concepts & skills. ",
  'Marquette University, in Wisconsin, states "CS is ',
  'the study of computers, including computational theory, ',
  "hardware and software design, algorithms, and the ",
  'ways that humans interact with technology." ',

];

var userFirstName = localStorage.getItem('focs_userFirstName');

if (userFirstName === "not entered") {
    var userFirstName=prompt("Please enter your full name:");
    if (userFirstName=="") { userFirstName="not entered" }
 localStorage.setItem('focs_userFirstName', userFirstName);}
  
if (userFirstName === null) {
    var userFirstName=prompt("Please enter your full name:");
    if (userFirstName=="") { userFirstName="not entered" }
 localStorage.setItem('focs_userFirstName', userFirstName);}
 
if (userFirstName === "null") {
    var userFirstName=prompt("Please enter your full name:");
    if (userFirstName=="") { userFirstName="not entered" }
 localStorage.setItem('focs_userFirstName', userFirstName);}
 
if (userFirstName === "not entered") {
    var userFirstName=prompt("Please enter your full name:");
    if (userFirstName=="") { userFirstName="not entered" }
 localStorage.setItem('focs_userFirstName', userFirstName);}

// selecting required elements
let timer_text = document.querySelector(".curr_time");
let accuracy_text = document.querySelector(".curr_accuracy");
let error_text = document.querySelector(".curr_errors");
let cpm_text = document.querySelector(".curr_cpm");
let wpm_text = document.querySelector(".curr_wpm");
let quote_text = document.querySelector("#quote");
let quote_text2 = document.querySelector("#quote2");
let quote_text3 = document.querySelector("#quote3");
let input_area = document.querySelector(".input_area");
let restart_btn = document.querySelector(".restart_btn");
let cpm_group = document.querySelector(".cpm");
let wpm_group = document.querySelector(".wpm");
let error_group = document.querySelector(".errors");
let accuracy_group = document.querySelector(".accuracy");

let timeLeft = TIME_LIMIT;
let timeElapsed = 0;
let total_errors = 0;
let errors = 0;
let accuracy = 0;
let characterTyped = 0;
let current_quote = "";
let quoteNo = 0;
let timer = null;

function updateQuote() {
  quote_text.textContent = null;
  current_quote = quotes_array[quoteNo];
  quote_text2.textContent = quotes_array[quoteNo+1]
  quote_text3.textContent = quotes_array[quoteNo+2]
  
  if (quoteNo+3 > quotes_array.length){
    quote_text3.textContent = quotes_array[0]
  }
  if (quoteNo+2 > quotes_array.length){
    quote_text2.textContent = quotes_array[0]
    quote_text3.textContent = quotes_array[1]
  }

  // separate each character and make an element 
  // out of each of them to individually style them
  current_quote.split('').forEach(char => {
    const charSpan = document.createElement('span')

    charSpan.innerText = char;

    quote_text.appendChild(charSpan)

  })

  // roll over to the first quote
  if (quoteNo < quotes_array.length - 1)
    quoteNo++;
  else
    quoteNo = 0;
}

function processCurrentText() {

  // get current input text and split it
  curr_input = input_area.value;
  curr_input_array = curr_input.split('');

  // increment total characters typed
  characterTyped++;

  errors = 0;

  quoteSpanArray = quote_text.querySelectorAll('span');
  quoteSpanArray.forEach((char, index) => {
    let typedChar = curr_input_array[index]

    // characters not currently typed
if (char.innerText == '‚ê£') {
      if (typedChar == ' ') {
        char.classList.add('correct_char');
        char.classList.remove('incorrect_char');
      } else{
        char.classList.add('incorrect_char');
        char.classList.remove('correct_char');
      }
      
      // incorrect characters
    }
    else if (char.innerText == '‚Üµ') {

    document.addEventListener('keydown', function(event) {
    if (event.key === 'Enter') {
        char.classList.add('correct_char');
        char.classList.remove('incorrect_char');
      } else{
        char.classList.add('incorrect_char');
        char.classList.remove('correct_char');
      }
})

}
    
    else if (typedChar == null) {
      char.classList.remove('correct_char');
      char.classList.remove('incorrect_char');

      // correct characters
    } else if (typedChar === char.innerText) {
      char.classList.add('correct_char');
      char.classList.remove('incorrect_char');

      // incorrect characters
    } else {
      char.classList.add('incorrect_char');
      char.classList.remove('correct_char');

      // increment number of errors
      errors++;
    }
  });

  // display the number of errors
  error_text.textContent = total_errors + errors;

  // update accuracy text
  let correctCharacters = (characterTyped - (total_errors + errors));
  let accuracyVal = ((correctCharacters / characterTyped) * 100);
  accuracy_text.textContent = Math.round(accuracyVal);

  // if current text is completely typed
  // irrespective of errors
  if (curr_input.length == current_quote.length) {
    updateQuote();

    // update total errors
    total_errors += errors;

    // clear the input area
    input_area.value = "";
  }

  let text = document.getElementById("quote").innerHTML; 

    document.getElementById("quote").innerHTML = text.replace("<span> </span>", "<span>‚ê£</span>").replace("<span>$</span>", "<span>/</span>");

  



}

function updateTimer() {
  if (timeLeft > 0) {
    // decrease the current time left
    timeLeft--;

    // increase the time elapsed
    timeElapsed++;

    // update the timer text
    timer_text.textContent = timeLeft + "s";
  }
  else {
    // finish the game
    finishGame();
  }
}

 function now() {
        
          var now = new Date();
        
          var date = [ now.getMonth() + 1, now.getDate(), now.getFullYear() ];
        
          var time = [ now.getHours(), now.getMinutes(), now.getSeconds() ];
        
          var suffix = ( time[0] < 12 ) ? "AM" : "PM";
        
          time[0] = ( time[0] < 12 ) ? time[0] : time[0] - 12;
        
          time[0] = time[0] || 12;
        
          for ( var i = 1; i < 3; i++ ) {
            if ( time[i] < 10 ) {
              time[i] = "0" + time[i];
            }
          }
        
          return "Taken at " +time.join(":") + " " + suffix + " on " + date.join("/");
        }

function finishGame() {
  // stop the timer
  clearInterval(timer);
  
  details.innerHTML = "Student Name: " + userFirstName +"<br>";
  details.innerHTML += activityName +"<br>";
  details.innerHTML += now() + "<br><br>";

  // disable the input area
  input_area.disabled = true;


  // display restart button
  restart_btn.style.display = "block";

  // calculate cpm and wpm
  cpm = Math.round(((characterTyped / timeElapsed) * 60));
  wpm = Math.round((((characterTyped / 5) / timeElapsed) * 60));

  // update cpm and wpm text
  cpm_text.textContent = cpm;
  wpm_text.textContent = wpm;

  // display the cpm and wpm
  cpm_group.style.display = "block";
  wpm_group.style.display = "block";
}


function startGame() {
  if (going == false){
  resetValues();
  updateQuote();

  // clear old and start a new timer
  clearInterval(timer);
  timer = setInterval(updateTimer, 1000);
  going = true
  }
}

function resetValues() {
  going = false
  timeLeft = TIME_LIMIT;
  timeElapsed = 0;
  errors = 0;
  total_errors = 0;
  accuracy = 0;
  characterTyped = 0;
  quoteNo = 0;
  input_area.disabled = false;

  input_area.value = "";
  quote_text.textContent = 'Click on the area below to start the game.';
  accuracy_text.textContent = 100;
  timer_text.textContent = timeLeft + 's';
  error_text.textContent = 0;
  restart_btn.style.display = "none";
  cpm_group.style.display = "none";
  wpm_group.style.display = "none";
}


  


</script>
